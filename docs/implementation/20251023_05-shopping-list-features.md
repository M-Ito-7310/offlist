# Phase 5: è²·ã„ç‰©ãƒªã‚¹ãƒˆæ©Ÿèƒ½å®Ÿè£…

**ä½œæˆæ—¥**: 2025å¹´10æœˆ23æ—¥
**Phaseç•ªå·**: Phase 5 / 6
**æ‰€è¦æ™‚é–“**: 120åˆ†
**é›£æ˜“åº¦**: ä¸­ç´šã€œä¸Šç´š

---

## ç›®æ¬¡

1. [Phaseæ¦‚è¦](#phaseæ¦‚è¦)
2. [çŠ¶æ…‹ç®¡ç†è¨­è¨ˆ](#çŠ¶æ…‹ç®¡ç†è¨­è¨ˆ)
3. [ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ æ©Ÿèƒ½](#ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ æ©Ÿèƒ½)
4. [ã‚¢ã‚¤ãƒ†ãƒ ç·¨é›†æ©Ÿèƒ½](#ã‚¢ã‚¤ãƒ†ãƒ ç·¨é›†æ©Ÿèƒ½)
5. [ã‚¢ã‚¤ãƒ†ãƒ å‰Šé™¤æ©Ÿèƒ½](#ã‚¢ã‚¤ãƒ†ãƒ å‰Šé™¤æ©Ÿèƒ½)
6. [ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½](#ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½)
7. [ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼](#ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼)
8. [å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ è¡¨ç¤º/éè¡¨ç¤º](#å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ è¡¨ç¤ºéè¡¨ç¤º)
9. [å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ ä¸€æ‹¬å‰Šé™¤](#å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ ä¸€æ‹¬å‰Šé™¤)
10. [ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…](#ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…)
11. [ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°](#ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°)
12. [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–](#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–)
13. [çµ±åˆãƒ†ã‚¹ãƒˆ](#çµ±åˆãƒ†ã‚¹ãƒˆ)
14. [ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ](#ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ)
15. [æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—](#æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—)

---

## Phaseæ¦‚è¦

### ç›®çš„

Phase 4ã§ä½œæˆã—ãŸUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨Phase 3ã§å®Ÿè£…ã—ãŸIndexedDBæ“ä½œã‚’çµ±åˆã—ã€å®Œå…¨ã«å‹•ä½œã™ã‚‹è²·ã„ç‰©ãƒªã‚¹ãƒˆã‚¢ãƒ—ãƒªã‚’å®Œæˆã•ã›ã¾ã™ã€‚ã“ã®Phaseã¯Offlistã®**å¿ƒè‡“éƒ¨**ã§ã‚ã‚Šã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®çœŸä¾¡ãŒç™ºæ®ã•ã‚Œã‚‹ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã™ã€‚

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã‘ã‚‹ä½ç½®ã¥ã‘

```
Phase 3 (IndexedDB) â”
                     â”œâ†’ Phase 5 (æ©Ÿèƒ½çµ±åˆ) â†’ Phase 6 (ãƒ‡ãƒ—ãƒ­ã‚¤)
Phase 4 (UI)        â”˜
```

Phase 5ã§ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆIndexedDBï¼‰ã¨ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆReact UIï¼‰ã‚’æ¥ç¶šã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œãŒå³åº§ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«åæ˜ ã•ã‚Œã‚‹**ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ**ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

### æ‰€è¦æ™‚é–“ã®å†…è¨³

| ã‚¿ã‚¹ã‚¯ | æ™‚é–“ |
|--------|------|
| ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯å®Ÿè£…ï¼ˆuseShoppingListï¼‰ | 20åˆ† |
| ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ æ©Ÿèƒ½ | 15åˆ† |
| ã‚¢ã‚¤ãƒ†ãƒ ç·¨é›†æ©Ÿèƒ½ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰ | 15åˆ† |
| ã‚¢ã‚¤ãƒ†ãƒ å‰Šé™¤æ©Ÿèƒ½ï¼ˆç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼‰ | 15åˆ† |
| ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½ | 10åˆ† |
| ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ | 10åˆ† |
| å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ è¡¨ç¤º/éè¡¨ç¤º | 10åˆ† |
| å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ ä¸€æ‹¬å‰Šé™¤ | 10åˆ† |
| ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£… | 15åˆ† |
| çµ±åˆãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚° | 10åˆ† |
| **åˆè¨ˆ** | **120åˆ†** |

### ã‚³ã‚¢åŸå‰‡: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ

```typescript
// å¾“æ¥å‹ï¼ˆã‚µãƒ¼ãƒãƒ¼ä¾å­˜ï¼‰
ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ â†’ API â†’ ã‚µãƒ¼ãƒãƒ¼DB â†’ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ â†’ UIæ›´æ–°
              â†‘
          ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¿…é ˆ

// Offlistï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆï¼‰
ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ â†’ IndexedDB â†’ UIæ›´æ–°
              â†‘
          ãƒ­ãƒ¼ã‚«ãƒ«å®Œçµ
```

ã™ã¹ã¦ã®æ“ä½œã¯**å³åº§ã«IndexedDBã«ä¿å­˜**ã•ã‚Œã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«ä¸€åˆ‡ä¾å­˜ã—ã¾ã›ã‚“ã€‚

---

## çŠ¶æ…‹ç®¡ç†è¨­è¨ˆ

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph TB
    A[ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ] --> B[ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼]
    B --> C[IndexedDBæ“ä½œ]
    C --> D[React Stateæ›´æ–°]
    D --> E[UIå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°]

    F[åˆæœŸãƒ­ãƒ¼ãƒ‰] --> G[IndexedDBèª­ã¿è¾¼ã¿]
    G --> D

    style C fill:#ffe1e1
    style D fill:#e1f5e1
```

### çŠ¶æ…‹ç®¡ç†æˆ¦ç•¥

#### React Hooksã®å½¹å‰²åˆ†æ‹…

| Hook | ç”¨é€” | ä¾‹ |
|------|------|---|
| **useState** | UIã®çŠ¶æ…‹ç®¡ç† | ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã€ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º/éè¡¨ç¤º |
| **useEffect** | å‰¯ä½œç”¨ï¼ˆDBæ“ä½œï¼‰ | åˆæœŸãƒ­ãƒ¼ãƒ‰ã€ãƒ‡ãƒ¼ã‚¿åŒæœŸ |
| **useMemo** | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– | ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ¸ˆã¿ãƒªã‚¹ãƒˆã®ãƒ¡ãƒ¢åŒ– |
| **useCallback** | é–¢æ•°ã®ãƒ¡ãƒ¢åŒ– | ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®å†ç”Ÿæˆé˜²æ­¢ |

### ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯: useShoppingList

Phase 5ã®æ ¸ã¨ãªã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã‚’å®Ÿè£…ã—ã¾ã™ã€‚ã“ã®ãƒ•ãƒƒã‚¯ã¯IndexedDBæ“ä½œã¨React Stateã‚’çµ±åˆã—ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã‚¯ãƒªãƒ¼ãƒ³ãªAPIã‚’æä¾›ã—ã¾ã™ã€‚

#### ãƒ•ã‚¡ã‚¤ãƒ«: `lib/hooks/useShoppingList.ts`

```typescript
'use client';

import { useState, useEffect, useCallback } from 'react';
import { ShoppingItem, Category } from '@/types';
import {
  getAllItems,
  addItem,
  updateItem,
  deleteItem,
  toggleItemChecked,
  deleteCheckedItems,
} from '@/lib/db';

export function useShoppingList() {
  // Stateç®¡ç†
  const [items, setItems] = useState<ShoppingItem[]>([]);
  const [loading, setLoading] = useState<boolean>(true);
  const [error, setError] = useState<string | null>(null);

  // åˆæœŸãƒ­ãƒ¼ãƒ‰: IndexedDBã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
  useEffect(() => {
    const loadItems = async () => {
      try {
        setLoading(true);
        const data = await getAllItems();
        setItems(data);
        setError(null);
      } catch (err) {
        console.error('Failed to load items:', err);
        setError('ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
      } finally {
        setLoading(false);
      }
    };

    loadItems();
  }, []);

  // ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ 
  const handleAddItem = useCallback(
    async (item: Omit<ShoppingItem, 'id' | 'createdAt' | 'updatedAt'>) => {
      try {
        const newItemId = await addItem(item);
        // IndexedDBã‹ã‚‰æœ€æ–°ã®ãƒ‡ãƒ¼ã‚¿ã‚’å†å–å¾—ï¼ˆæ¥½è¦³çš„æ›´æ–°ã‚‚å¯èƒ½ï¼‰
        const updatedItems = await getAllItems();
        setItems(updatedItems);
        return newItemId;
      } catch (err) {
        console.error('Failed to add item:', err);
        throw new Error('ã‚¢ã‚¤ãƒ†ãƒ ã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ');
      }
    },
    []
  );

  // ã‚¢ã‚¤ãƒ†ãƒ æ›´æ–°
  const handleUpdateItem = useCallback(
    async (id: string, updates: Partial<ShoppingItem>) => {
      try {
        await updateItem(id, updates);
        const updatedItems = await getAllItems();
        setItems(updatedItems);
      } catch (err) {
        console.error('Failed to update item:', err);
        throw new Error('ã‚¢ã‚¤ãƒ†ãƒ ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ');
      }
    },
    []
  );

  // ã‚¢ã‚¤ãƒ†ãƒ å‰Šé™¤
  const handleDeleteItem = useCallback(async (id: string) => {
    try {
      await deleteItem(id);
      const updatedItems = await getAllItems();
      setItems(updatedItems);
    } catch (err) {
      console.error('Failed to delete item:', err);
      throw new Error('ã‚¢ã‚¤ãƒ†ãƒ ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  }, []);

  // ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ãƒˆã‚°ãƒ«
  const handleToggleCheck = useCallback(async (id: string) => {
    try {
      await toggleItemChecked(id);
      const updatedItems = await getAllItems();
      setItems(updatedItems);
    } catch (err) {
      console.error('Failed to toggle item:', err);
      throw new Error('ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã®å¤‰æ›´ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  }, []);

  // å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ ä¸€æ‹¬å‰Šé™¤
  const handleDeleteChecked = useCallback(async () => {
    try {
      const deletedCount = await deleteCheckedItems();
      const updatedItems = await getAllItems();
      setItems(updatedItems);
      return deletedCount;
    } catch (err) {
      console.error('Failed to delete checked items:', err);
      throw new Error('å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  }, []);

  return {
    items,
    loading,
    error,
    addItem: handleAddItem,
    updateItem: handleUpdateItem,
    deleteItem: handleDeleteItem,
    toggleCheck: handleToggleCheck,
    deleteChecked: handleDeleteChecked,
  };
}
```

#### ä½¿ç”¨ä¾‹

```typescript
const {
  items,
  loading,
  error,
  addItem,
  updateItem,
  deleteItem,
  toggleCheck,
  deleteChecked,
} = useShoppingList();
```

---

## ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ æ©Ÿèƒ½

### æ©Ÿèƒ½ä»•æ§˜

- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰æ–°ã—ã„ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ 
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå•†å“åå¿…é ˆã€1-50æ–‡å­—ï¼‰
- IndexedDBã«ä¿å­˜
- ãƒªã‚¹ãƒˆã®å…ˆé ­ã«å³åº§ã«è¡¨ç¤º
- é€ä¿¡å¾Œã«ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢

### å®Ÿè£…: AddItemFormçµ±åˆ

#### ãƒ•ã‚¡ã‚¤ãƒ«: `components/AddItemForm.tsx`ï¼ˆå®Œå…¨ç‰ˆï¼‰

```typescript
'use client';

import { useState, FormEvent } from 'react';
import { Category } from '@/types';

interface AddItemFormProps {
  onItemAdded: (item: {
    name: string;
    category: Category;
    checked: boolean;
    quantity?: number;
    memo?: string;
  }) => Promise<void>;
}

export default function AddItemForm({ onItemAdded }: AddItemFormProps) {
  const [name, setName] = useState('');
  const [category, setCategory] = useState<Category>('food');
  const [quantity, setQuantity] = useState<number>(1);
  const [memo, setMemo] = useState('');
  const [isSubmitting, setIsSubmitting] = useState(false);

  const handleSubmit = async (e: FormEvent) => {
    e.preventDefault();
    if (!name.trim() || name.length > 50) return;

    setIsSubmitting(true);
    try {
      await onItemAdded({
        name: name.trim(),
        category,
        checked: false,
        quantity,
        memo: memo.trim(),
      });

      // ãƒ•ã‚©ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
      setName('');
      setCategory('food');
      setQuantity(1);
      setMemo('');
    } catch (error) {
      console.error('Failed to add item:', error);
      alert('ã‚¢ã‚¤ãƒ†ãƒ ã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ');
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="bg-white rounded-lg shadow-md p-4 mb-4">
      <div className="mb-3">
        <input
          type="text"
          value={name}
          onChange={(e) => setName(e.target.value)}
          placeholder="ã‚¢ã‚¤ãƒ†ãƒ å (ä¾‹: ã‚Šã‚“ã”)"
          maxLength={50}
          required
          className="input-field"
          disabled={isSubmitting}
        />
        {name.length > 0 && (
          <p className="text-xs text-gray-500 mt-1">
            {name.length} / 50 æ–‡å­—
          </p>
        )}
      </div>

      <div className="grid grid-cols-2 gap-3 mb-3">
        <select
          value={category}
          onChange={(e) => setCategory(e.target.value as Category)}
          className="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary outline-none"
          disabled={isSubmitting}
        >
          <option value="food">ğŸ é£Ÿå“</option>
          <option value="daily">ğŸ§´ æ—¥ç”¨å“</option>
          <option value="other">ğŸ“¦ ãã®ä»–</option>
        </select>

        <input
          type="number"
          value={quantity}
          onChange={(e) => setQuantity(Number(e.target.value))}
          min="1"
          max="999"
          className="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary outline-none"
          disabled={isSubmitting}
        />
      </div>

      <div className="mb-3">
        <input
          type="text"
          value={memo}
          onChange={(e) => setMemo(e.target.value)}
          placeholder="ãƒ¡ãƒ¢ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)"
          maxLength={100}
          className="input-field"
          disabled={isSubmitting}
        />
      </div>

      <button
        type="submit"
        disabled={isSubmitting || !name.trim()}
        className="btn-primary w-full"
      >
        {isSubmitting ? 'è¿½åŠ ä¸­...' : 'è¿½åŠ '}
      </button>
    </form>
  );
}
```

### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | ãƒ«ãƒ¼ãƒ« | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ |
|-----------|--------|---------------|
| å•†å“å | å¿…é ˆã€1-50æ–‡å­— | ã€Œå•†å“åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€ |
| ã‚«ãƒ†ã‚´ãƒªãƒ¼ | food/daily/other | ï¼ˆé¸æŠåˆ¶ãªã®ã§ã‚¨ãƒ©ãƒ¼ãªã—ï¼‰ |
| æ•°é‡ | 1-999 | ï¼ˆHTML5ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ |
| ãƒ¡ãƒ¢ | 0-100æ–‡å­—ï¼ˆä»»æ„ï¼‰ | - |

---

## ã‚¢ã‚¤ãƒ†ãƒ ç·¨é›†æ©Ÿèƒ½

### æ©Ÿèƒ½ä»•æ§˜

- ã‚¢ã‚¤ãƒ†ãƒ ã‚’ã‚¯ãƒªãƒƒã‚¯ã§ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
- ç¾åœ¨ã®å€¤ãŒãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›æ¸ˆã¿
- ä¿å­˜ãƒœã‚¿ãƒ³ã§IndexedDBæ›´æ–°
- ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã€ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã€Escã‚­ãƒ¼ã§é–‰ã˜ã‚‹

### å®Ÿè£…: EditItemModalçµ±åˆ

#### ãƒ•ã‚¡ã‚¤ãƒ«: `components/EditItemModal.tsx`ï¼ˆå®Œå…¨ç‰ˆï¼‰

```typescript
'use client';

import { useState, useEffect, FormEvent } from 'react';
import { ShoppingItem, Category } from '@/types';

interface EditItemModalProps {
  item: ShoppingItem | null;
  onClose: () => void;
  onItemUpdated: (id: string, updates: Partial<ShoppingItem>) => Promise<void>;
}

export default function EditItemModal({ item, onClose, onItemUpdated }: EditItemModalProps) {
  const [name, setName] = useState('');
  const [category, setCategory] = useState<Category>('food');
  const [quantity, setQuantity] = useState<number>(1);
  const [memo, setMemo] = useState('');
  const [isSubmitting, setIsSubmitting] = useState(false);

  // ã‚¢ã‚¤ãƒ†ãƒ ãŒå¤‰æ›´ã•ã‚ŒãŸã‚‰ãƒ•ã‚©ãƒ¼ãƒ ã‚’åˆæœŸåŒ–
  useEffect(() => {
    if (item) {
      setName(item.name);
      setCategory(item.category);
      setQuantity(item.quantity || 1);
      setMemo(item.memo || '');
    }
  }, [item]);

  // Escã‚­ãƒ¼ã§é–‰ã˜ã‚‹
  useEffect(() => {
    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === 'Escape') onClose();
    };
    if (item) {
      window.addEventListener('keydown', handleEscape);
      return () => window.removeEventListener('keydown', handleEscape);
    }
  }, [item, onClose]);

  if (!item) return null;

  const handleSubmit = async (e: FormEvent) => {
    e.preventDefault();
    if (!name.trim()) return;

    setIsSubmitting(true);
    try {
      await onItemUpdated(item.id, {
        name: name.trim(),
        category,
        quantity,
        memo: memo.trim(),
      });
      onClose();
    } catch (error) {
      console.error('Failed to update item:', error);
      alert('æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ');
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <div
      className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
      onClick={onClose}
    >
      <div
        className="bg-white rounded-lg shadow-xl max-w-md w-full p-6 animate-fadeIn"
        onClick={(e) => e.stopPropagation()}
      >
        <h2 className="text-xl font-bold mb-4">ã‚¢ã‚¤ãƒ†ãƒ ã‚’ç·¨é›†</h2>
        <form onSubmit={handleSubmit}>
          <div className="mb-3">
            <label className="block text-sm font-medium mb-1">å•†å“å</label>
            <input
              type="text"
              value={name}
              onChange={(e) => setName(e.target.value)}
              maxLength={50}
              required
              className="input-field"
              disabled={isSubmitting}
            />
          </div>

          <div className="grid grid-cols-2 gap-3 mb-3">
            <div>
              <label className="block text-sm font-medium mb-1">ã‚«ãƒ†ã‚´ãƒªãƒ¼</label>
              <select
                value={category}
                onChange={(e) => setCategory(e.target.value as Category)}
                className="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary outline-none w-full"
                disabled={isSubmitting}
              >
                <option value="food">ğŸ é£Ÿå“</option>
                <option value="daily">ğŸ§´ æ—¥ç”¨å“</option>
                <option value="other">ğŸ“¦ ãã®ä»–</option>
              </select>
            </div>

            <div>
              <label className="block text-sm font-medium mb-1">æ•°é‡</label>
              <input
                type="number"
                value={quantity}
                onChange={(e) => setQuantity(Number(e.target.value))}
                min="1"
                max="999"
                className="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary outline-none w-full"
                disabled={isSubmitting}
              />
            </div>
          </div>

          <div className="mb-4">
            <label className="block text-sm font-medium mb-1">ãƒ¡ãƒ¢</label>
            <input
              type="text"
              value={memo}
              onChange={(e) => setMemo(e.target.value)}
              placeholder="ãƒ¡ãƒ¢"
              maxLength={100}
              className="input-field"
              disabled={isSubmitting}
            />
          </div>

          <div className="flex gap-3">
            <button
              type="button"
              onClick={onClose}
              className="flex-1 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"
              disabled={isSubmitting}
            >
              ã‚­ãƒ£ãƒ³ã‚»ãƒ«
            </button>
            <button
              type="submit"
              disabled={isSubmitting}
              className="flex-1 bg-primary text-white py-3 rounded-lg hover:bg-primary-dark disabled:opacity-50 transition-colors"
            >
              {isSubmitting ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜'}
            </button>
          </div>
        </form>
      </div>
    </div>
  );
}
```

---

## ã‚¢ã‚¤ãƒ†ãƒ å‰Šé™¤æ©Ÿèƒ½

### æ©Ÿèƒ½ä»•æ§˜

- å‰Šé™¤ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
- ã€Œå‰Šé™¤ã€ã§å³åº§ã«IndexedDBã‹ã‚‰å‰Šé™¤
- ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

### å®Ÿè£…: ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### ãƒ•ã‚¡ã‚¤ãƒ«: `components/ConfirmDialog.tsx`

```typescript
'use client';

interface ConfirmDialogProps {
  isOpen: boolean;
  title: string;
  message: string;
  confirmLabel?: string;
  cancelLabel?: string;
  onConfirm: () => void;
  onCancel: () => void;
}

export default function ConfirmDialog({
  isOpen,
  title,
  message,
  confirmLabel = 'å‰Šé™¤',
  cancelLabel = 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
  onConfirm,
  onCancel,
}: ConfirmDialogProps) {
  if (!isOpen) return null;

  return (
    <div
      className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
      onClick={onCancel}
    >
      <div
        className="bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fadeIn"
        onClick={(e) => e.stopPropagation()}
      >
        <h3 className="text-lg font-bold mb-2">{title}</h3>
        <p className="text-gray-600 mb-6">{message}</p>
        <div className="flex gap-3">
          <button
            onClick={onCancel}
            className="flex-1 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"
          >
            {cancelLabel}
          </button>
          <button
            onClick={onConfirm}
            className="flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors"
          >
            {confirmLabel}
          </button>
        </div>
      </div>
    </div>
  );
}
```

### ShoppingItemã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ä½¿ç”¨

```typescript
const [deleteConfirm, setDeleteConfirm] = useState<string | null>(null);

// å‰Šé™¤ãƒœã‚¿ãƒ³
<button
  onClick={() => setDeleteConfirm(item.id)}
  className="text-red-600 hover:text-red-700 px-2 py-1"
>
  å‰Šé™¤
</button>

// ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
<ConfirmDialog
  isOpen={deleteConfirm === item.id}
  title="ã‚¢ã‚¤ãƒ†ãƒ ã‚’å‰Šé™¤"
  message="ã“ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’å‰Šé™¤ã—ã¾ã™ã‹?"
  onConfirm={async () => {
    await onDelete(item.id);
    setDeleteConfirm(null);
  }}
  onCancel={() => setDeleteConfirm(null)}
/>
```

---

## ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½

### æ©Ÿèƒ½ä»•æ§˜

- ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒƒã‚¯ã§è³¼å…¥æ¸ˆã¿/æœªè³¼å…¥ã‚’åˆ‡ã‚Šæ›¿ãˆ
- ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ã‚¢ã‚¤ãƒ†ãƒ ã¯å–ã‚Šæ¶ˆã—ç·šã¨è–„ã„ã‚°ãƒ¬ãƒ¼è¡¨ç¤º
- å³åº§ã«IndexedDBã«ä¿å­˜

### å®Ÿè£…: ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã®è¦–è¦šçš„å¤‰åŒ–

#### ãƒ•ã‚¡ã‚¤ãƒ«: `components/ShoppingItem.tsx`ï¼ˆãƒã‚§ãƒƒã‚¯éƒ¨åˆ†ï¼‰

```typescript
export default function ShoppingItem({
  item,
  onToggleCheck,
  onEdit,
  onDelete,
}: ShoppingItemProps) {
  const categoryEmoji = {
    food: 'ğŸ',
    daily: 'ğŸ§´',
    other: 'ğŸ“¦',
  };

  return (
    <div
      className={`bg-white rounded-lg shadow-sm p-4 mb-2 transition-all duration-300 ${
        item.checked ? 'opacity-60' : ''
      }`}
    >
      <div className="flex items-center gap-3">
        {/* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ */}
        <input
          type="checkbox"
          checked={item.checked}
          onChange={() => onToggleCheck(item.id)}
          className="w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary cursor-pointer transition-transform hover:scale-110"
        />

        <div className="flex-1">
          <div className="flex items-center gap-2">
            <span className="text-lg">{categoryEmoji[item.category]}</span>
            {/* ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ã¯å–ã‚Šæ¶ˆã—ç·š */}
            <span
              className={`font-medium transition-all ${
                item.checked ? 'line-through text-gray-500' : 'text-gray-900'
              }`}
            >
              {item.name}
            </span>
            {item.quantity && item.quantity > 1 && (
              <span className="text-sm text-gray-500">x{item.quantity}</span>
            )}
          </div>
          {item.memo && (
            <p className="text-sm text-gray-600 mt-1 ml-7">{item.memo}</p>
          )}
        </div>

        <div className="flex gap-2">
          <button
            onClick={() => onEdit(item)}
            className="text-primary hover:text-primary-dark px-2 py-1 transition-colors"
          >
            ç·¨é›†
          </button>
          <button
            onClick={() => onDelete(item.id)}
            className="text-red-600 hover:text-red-700 px-2 py-1 transition-colors"
          >
            å‰Šé™¤
          </button>
        </div>
      </div>
    </div>
  );
}
```

### ãƒã‚§ãƒƒã‚¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

```typescript
// ãƒã‚§ãƒƒã‚¯æ™‚ã«ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
<input
  type="checkbox"
  checked={item.checked}
  onChange={() => onToggleCheck(item.id)}
  className="w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary cursor-pointer transition-transform hover:scale-110 checked:scale-110"
/>
```

---

## ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

### æ©Ÿèƒ½ä»•æ§˜

- ã‚¿ãƒ–å‹ãƒœã‚¿ãƒ³ã§ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ‡ã‚Šæ›¿ãˆ
- ã€Œå…¨ã¦ã€ã€Œé£Ÿå“ã€ã€Œæ—¥ç”¨å“ã€ã€Œãã®ä»–ã€
- ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§å®Ÿè¡Œï¼ˆé«˜é€Ÿï¼‰

### å®Ÿè£…: ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼çŠ¶æ…‹ç®¡ç†

#### ãƒ•ã‚¡ã‚¤ãƒ«: `app/page.tsx`ï¼ˆãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ï¼‰

```typescript
'use client';

import { useState, useMemo } from 'react';
import { useShoppingList } from '@/lib/hooks/useShoppingList';
import { Category } from '@/types';
import AddItemForm from '@/components/AddItemForm';
import ShoppingItem from '@/components/ShoppingItem';
import CategoryFilter from '@/components/CategoryFilter';
import EditItemModal from '@/components/EditItemModal';

export default function Home() {
  const {
    items,
    loading,
    error,
    addItem,
    updateItem,
    deleteItem,
    toggleCheck,
    deleteChecked,
  } = useShoppingList();

  const [selectedCategory, setSelectedCategory] = useState<Category | 'all'>('all');
  const [showCompleted, setShowCompleted] = useState(true);
  const [editingItem, setEditingItem] = useState<ShoppingItem | null>(null);

  // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ¸ˆã¿ã‚¢ã‚¤ãƒ†ãƒ ï¼ˆuseMemoã§æœ€é©åŒ–ï¼‰
  const filteredItems = useMemo(() => {
    let result = items;

    // ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
    if (selectedCategory !== 'all') {
      result = result.filter((item) => item.category === selectedCategory);
    }

    // å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ è¡¨ç¤º/éè¡¨ç¤º
    if (!showCompleted) {
      result = result.filter((item) => !item.checked);
    }

    return result;
  }, [items, selectedCategory, showCompleted]);

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <p className="text-gray-500">èª­ã¿è¾¼ã¿ä¸­...</p>
      </div>
    );
  }

  if (error) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <p className="text-red-600">{error}</p>
      </div>
    );
  }

  return (
    <main className="min-h-screen bg-gray-50 pb-20">
      <div className="max-w-2xl mx-auto p-4">
        <header className="mb-6">
          <h1 className="text-3xl font-bold text-gray-900">Offlist</h1>
          <p className="text-gray-600">ã‚ªãƒ•ãƒ©ã‚¤ãƒ³è²·ã„ç‰©ãƒªã‚¹ãƒˆ</p>
        </header>

        {/* ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ  */}
        <AddItemForm onItemAdded={addItem} />

        {/* ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */}
        <CategoryFilter
          selectedCategory={selectedCategory}
          onFilterChange={setSelectedCategory}
        />

        {/* ã‚¢ã‚¤ãƒ†ãƒ ãƒªã‚¹ãƒˆ */}
        <div className="mb-4">
          {filteredItems.length === 0 ? (
            <div className="text-center py-12">
              <p className="text-gray-500">ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚ã‚Šã¾ã›ã‚“</p>
            </div>
          ) : (
            filteredItems.map((item) => (
              <ShoppingItem
                key={item.id}
                item={item}
                onToggleCheck={toggleCheck}
                onEdit={setEditingItem}
                onDelete={deleteItem}
              />
            ))
          )}
        </div>

        {/* ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« */}
        <EditItemModal
          item={editingItem}
          onClose={() => setEditingItem(null)}
          onItemUpdated={updateItem}
        />
      </div>
    </main>
  );
}
```

---

## å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ è¡¨ç¤º/éè¡¨ç¤º

### æ©Ÿèƒ½ä»•æ§˜

- ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ã§å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ ã®è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆ
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯è¡¨ç¤ºçŠ¶æ…‹
- éè¡¨ç¤ºæ™‚ã¯æœªå®Œäº†ã‚¢ã‚¤ãƒ†ãƒ ã®ã¿è¡¨ç¤º

### å®Ÿè£…: ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³

```typescript
{/* å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ è¡¨ç¤º/éè¡¨ç¤ºãƒˆã‚°ãƒ« */}
<div className="flex items-center justify-between mb-4">
  <button
    onClick={() => setShowCompleted(!showCompleted)}
    className="text-sm text-primary hover:text-primary-dark transition-colors"
  >
    {showCompleted ? 'âœ“ å®Œäº†æ¸ˆã¿ã‚’è¡¨ç¤ºä¸­' : 'âœ— å®Œäº†æ¸ˆã¿ã‚’éè¡¨ç¤º'}
  </button>
  <span className="text-sm text-gray-500">
    {items.filter((i) => !i.checked).length} / {items.length} ä»¶
  </span>
</div>
```

---

## å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ ä¸€æ‹¬å‰Šé™¤

### æ©Ÿèƒ½ä»•æ§˜

- ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä¸€æ‹¬å‰Šé™¤
- ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§èª¤æ“ä½œé˜²æ­¢
- å‰Šé™¤ä»¶æ•°ã‚’è¡¨ç¤º

### å®Ÿè£…: ãƒ•ãƒƒã‚¿ãƒ¼ãƒœã‚¿ãƒ³

```typescript
const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);

// å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ æ•°ã‚’è¨ˆç®—
const checkedCount = items.filter((item) => item.checked).length;

// ãƒ•ãƒƒã‚¿ãƒ¼
<footer className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4">
  <div className="max-w-2xl mx-auto flex justify-between items-center">
    <button
      onClick={() => setShowDeleteConfirm(true)}
      disabled={checkedCount === 0}
      className="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
    >
      å®Œäº†æ¸ˆã¿ã‚’å‰Šé™¤ ({checkedCount})
    </button>

    <div className="text-sm text-gray-600">
      ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œä¸­
    </div>
  </div>
</footer>

{/* å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚° */}
<ConfirmDialog
  isOpen={showDeleteConfirm}
  title="å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ ã‚’å‰Šé™¤"
  message={`${checkedCount}ä»¶ã®å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ ã‚’å‰Šé™¤ã—ã¾ã™ã‹?`}
  onConfirm={async () => {
    await deleteChecked();
    setShowDeleteConfirm(false);
  }}
  onCancel={() => setShowDeleteConfirm(false)}
/>
```

---

## ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…

### ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥

| ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ | åŠ¹æœ |
|-----------|--------------|------|
| ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ  | ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¤ãƒ³ + ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ | æ–°è¦è¿½åŠ ã‚’å¼·èª¿ |
| ã‚¢ã‚¤ãƒ†ãƒ å‰Šé™¤ | ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ | ã‚¹ãƒ ãƒ¼ã‚ºãªå‰Šé™¤ |
| ãƒã‚§ãƒƒã‚¯ | ã‚¹ã‚±ãƒ¼ãƒ« | è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ |
| ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º | ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ | è‡ªç„¶ãªè¡¨ç¤º |

### Tailwind CSSã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

#### æ—¢å­˜ã®è¨­å®šï¼ˆtailwind.config.tsï¼‰

```typescript
animation: {
  'slideUp': 'slideUp 0.3s ease-out',
  'fadeIn': 'fadeIn 0.2s ease-out',
},
keyframes: {
  slideUp: {
    '0%': { transform: 'translateY(100%)' },
    '100%': { transform: 'translateY(0)' },
  },
  fadeIn: {
    '0%': { opacity: '0' },
    '100%': { opacity: '1' },
  },
},
```

### è¿½åŠ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³: Framer Motionï¼‰

#### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install framer-motion
```

#### ä½¿ç”¨ä¾‹: ShoppingItemã«ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¤ãƒ³

```typescript
import { motion } from 'framer-motion';

export default function ShoppingItem({ item, ... }: ShoppingItemProps) {
  return (
    <motion.div
      initial={{ opacity: 0, y: -10 }}
      animate={{ opacity: 1, y: 0 }}
      exit={{ opacity: 0, x: 100 }}
      transition={{ duration: 0.2 }}
      className={`bg-white rounded-lg shadow-sm p-4 mb-2 ${
        item.checked ? 'opacity-60' : ''
      }`}
    >
      {/* ã‚¢ã‚¤ãƒ†ãƒ å†…å®¹ */}
    </motion.div>
  );
}
```

#### ãƒªã‚¹ãƒˆå…¨ä½“ã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
import { AnimatePresence } from 'framer-motion';

<AnimatePresence>
  {filteredItems.map((item) => (
    <ShoppingItem
      key={item.id}
      item={item}
      onToggleCheck={toggleCheck}
      onEdit={setEditingItem}
      onDelete={deleteItem}
    />
  ))}
</AnimatePresence>
```

---

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼ã‚·ãƒŠãƒªã‚ª

| ã‚¨ãƒ©ãƒ¼ | åŸå›  | å¯¾å‡¦ |
|--------|------|------|
| IndexedDBåˆæœŸåŒ–å¤±æ•— | ãƒ–ãƒ©ã‚¦ã‚¶éå¯¾å¿œ | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º |
| ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ å¤±æ•— | å®¹é‡ä¸è¶³ | ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ |
| ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãªã— | - | å•é¡Œãªã—ï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼‰ |

### ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### ãƒ•ã‚¡ã‚¤ãƒ«: `components/Toast.tsx`

```typescript
'use client';

import { useEffect } from 'react';

interface ToastProps {
  message: string;
  type: 'success' | 'error' | 'info';
  onClose: () => void;
  duration?: number;
}

export default function Toast({ message, type, onClose, duration = 3000 }: ToastProps) {
  useEffect(() => {
    const timer = setTimeout(onClose, duration);
    return () => clearTimeout(timer);
  }, [duration, onClose]);

  const colors = {
    success: 'bg-green-500',
    error: 'bg-red-500',
    info: 'bg-blue-500',
  };

  return (
    <div className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 animate-slideUp">
      <div className={`${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg`}>
        {message}
      </div>
    </div>
  );
}
```

### ä½¿ç”¨ä¾‹

```typescript
const [toast, setToast] = useState<{ message: string; type: 'success' | 'error' } | null>(null);

// ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ æ™‚
try {
  await addItem(newItem);
  setToast({ message: 'ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ ã—ã¾ã—ãŸ', type: 'success' });
} catch (error) {
  setToast({ message: 'ã‚¢ã‚¤ãƒ†ãƒ ã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ', type: 'error' });
}

// ãƒˆãƒ¼ã‚¹ãƒˆè¡¨ç¤º
{toast && (
  <Toast
    message={toast.message}
    type={toast.type}
    onClose={() => setToast(null)}
  />
)}
```

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### useMemoã®æ´»ç”¨

```typescript
// ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ¸ˆã¿ã‚¢ã‚¤ãƒ†ãƒ ã‚’ãƒ¡ãƒ¢åŒ–
const filteredItems = useMemo(() => {
  let result = items;

  if (selectedCategory !== 'all') {
    result = result.filter((item) => item.category === selectedCategory);
  }

  if (!showCompleted) {
    result = result.filter((item) => !item.checked);
  }

  return result;
}, [items, selectedCategory, showCompleted]);
```

### useCallbackã®æ´»ç”¨

```typescript
// ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ãƒ¡ãƒ¢åŒ–
const handleAddItem = useCallback(
  async (item: Omit<ShoppingItem, 'id' | 'createdAt' | 'updatedAt'>) => {
    try {
      const newItemId = await addItem(item);
      const updatedItems = await getAllItems();
      setItems(updatedItems);
      return newItemId;
    } catch (err) {
      console.error('Failed to add item:', err);
      throw new Error('ã‚¢ã‚¤ãƒ†ãƒ ã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  },
  []
);
```

### React.memoã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæœ€é©åŒ–

```typescript
import { memo } from 'react';

const ShoppingItem = memo(({ item, onToggleCheck, onEdit, onDelete }: ShoppingItemProps) => {
  // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
});

export default ShoppingItem;
```

---

## çµ±åˆãƒ†ã‚¹ãƒˆ

### ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

#### 1. ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ ãƒ†ã‚¹ãƒˆ

```
1. ã‚¢ã‚¤ãƒ†ãƒ åã€Œã‚Šã‚“ã”ã€ã‚’å…¥åŠ›
2. ã‚«ãƒ†ã‚´ãƒªãƒ¼ã€Œé£Ÿå“ã€ã‚’é¸æŠ
3. ã€Œè¿½åŠ ã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
4. ãƒªã‚¹ãƒˆã®å…ˆé ­ã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
5. ãƒ•ã‚©ãƒ¼ãƒ ãŒã‚¯ãƒªã‚¢ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
6. DevTools â†’ Application â†’ IndexedDB ã§ãƒ‡ãƒ¼ã‚¿ç¢ºèª
```

#### 2. ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ

```
1. ã‚¢ã‚¤ãƒ†ãƒ ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å–ã‚Šæ¶ˆã—ç·šã¨è–„ã„ã‚°ãƒ¬ãƒ¼è¡¨ç¤ºã«ãªã‚‹ã“ã¨ã‚’ç¢ºèª
3. å†åº¦ã‚¯ãƒªãƒƒã‚¯
4. å…ƒã®ã‚¹ã‚¿ã‚¤ãƒ«ã«æˆ»ã‚‹ã“ã¨ã‚’ç¢ºèª
5. IndexedDBã§`checked`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
```

#### 3. ç·¨é›†æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ

```
1. ã‚¢ã‚¤ãƒ†ãƒ ã®ã€Œç·¨é›†ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
3. å•†å“åã‚’ã€Œç‰›ä¹³ã€ã«å¤‰æ›´
4. ã€Œä¿å­˜ã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
5. ãƒªã‚¹ãƒˆã«åæ˜ ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
6. IndexedDBã§æ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
```

#### 4. å‰Šé™¤æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ

```
1. ã‚¢ã‚¤ãƒ†ãƒ ã®ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
3. ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
4. ãƒªã‚¹ãƒˆã‹ã‚‰æ¶ˆãˆã‚‹ã“ã¨ã‚’ç¢ºèª
5. IndexedDBã‹ã‚‰å‰Šé™¤ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
```

#### 5. ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ†ã‚¹ãƒˆ

```
1. ã€Œé£Ÿå“ã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
2. é£Ÿå“ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
3. ã€Œå…¨ã¦ã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
4. å…¨ã‚¢ã‚¤ãƒ†ãƒ ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
```

#### 6. å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ ä¸€æ‹¬å‰Šé™¤ãƒ†ã‚¹ãƒˆ

```
1. è¤‡æ•°ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’ãƒã‚§ãƒƒã‚¯
2. ã€Œå®Œäº†æ¸ˆã¿ã‚’å‰Šé™¤ã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
3. ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
4. ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
5. ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ã‚¢ã‚¤ãƒ†ãƒ ãŒã™ã¹ã¦å‰Šé™¤ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
```

### ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œãƒ†ã‚¹ãƒˆ

#### Chrome DevToolsã§ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰

```
1. Chrome DevTools â†’ Network ã‚¿ãƒ–
2. ã€ŒOfflineã€ã«ãƒã‚§ãƒƒã‚¯
3. ã‚¢ãƒ—ãƒªã‚’æ“ä½œ
4. ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª
```

#### å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆï¼ˆæ¨å¥¨ï¼‰

```
1. ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ã‚¢ãƒ—ãƒªã«ã‚¢ã‚¯ã‚»ã‚¹
2. æ©Ÿå†…ãƒ¢ãƒ¼ãƒ‰ã‚’ON
3. ã‚¢ãƒ—ãƒªã‚’æ“ä½œ
4. ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª
```

---

## ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### æ©Ÿèƒ½å®Ÿè£…

- [ ] ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ `useShoppingList` å®Ÿè£…
- [ ] ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ æ©Ÿèƒ½å‹•ä½œ
- [ ] ã‚¢ã‚¤ãƒ†ãƒ ç·¨é›†æ©Ÿèƒ½å‹•ä½œï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰
- [ ] ã‚¢ã‚¤ãƒ†ãƒ å‰Šé™¤æ©Ÿèƒ½å‹•ä½œï¼ˆç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼‰
- [ ] ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½å‹•ä½œ
- [ ] ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¹ã‚¿ã‚¤ãƒ«å¤‰æ›´ï¼ˆå–ã‚Šæ¶ˆã—ç·šã€è–„ã„ã‚°ãƒ¬ãƒ¼ï¼‰
- [ ] ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å‹•ä½œ
- [ ] å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ è¡¨ç¤º/éè¡¨ç¤ºãƒˆã‚°ãƒ«å‹•ä½œ
- [ ] å®Œäº†ã‚¢ã‚¤ãƒ†ãƒ ä¸€æ‹¬å‰Šé™¤å‹•ä½œ

### ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–

- [ ] ã™ã¹ã¦ã®æ“ä½œãŒIndexedDBã«å³åº§ã«ä¿å­˜ã•ã‚Œã‚‹
- [ ] ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰å¾Œã‚‚ãƒ‡ãƒ¼ã‚¿ãŒä¿æŒã•ã‚Œã‚‹
- [ ] ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã‚‚ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒå‹•ä½œã™ã‚‹
- [ ] Chrome DevToolsã§IndexedDBã®å†…å®¹ã‚’ç¢ºèªã§ãã‚‹

### UI/UX

- [ ] ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚¹ãƒ ãƒ¼ã‚º
- [ ] ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒEscã‚­ãƒ¼ã§é–‰ã˜ã‚‹
- [ ] ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹è¡¨ç¤º
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- [ ] ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

- [ ] ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŒuseMemoã§æœ€é©åŒ–
- [ ] ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒuseCallbackã§ãƒ¡ãƒ¢åŒ–
- [ ] ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒãªã„

### ãƒ†ã‚¹ãƒˆ

- [ ] å…¨æ©Ÿèƒ½ã®å‹•ä½œç¢ºèªå®Œäº†
- [ ] ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆæˆåŠŸ
- [ ] å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆæˆåŠŸï¼ˆæ¨å¥¨ï¼‰

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### Phase 6ã¸é€²ã‚€æº–å‚™

Phase 5ãŒå®Œäº†ã—ãŸã‚‰ã€æ¬¡ã¯æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ã«é€²ã¿ã¾ã™:

**Phase 6ã®å†…å®¹:**
- ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–
- Lighthouseãƒ†ã‚¹ãƒˆï¼ˆPWAã‚¹ã‚³ã‚¢100ç‚¹ç›®æ¨™ï¼‰
- Vercelãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š
- æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
- å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œãƒ†ã‚¹ãƒˆ

**Phase 6ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:** `20251023_06-vercel-deployment.md`

### è¿½åŠ æ©Ÿèƒ½ã®æ¤œè¨

Phase 6å®Œäº†å¾Œã€ä»¥ä¸‹ã®æ‹¡å¼µæ©Ÿèƒ½ã‚’æ¤œè¨ã§ãã¾ã™:

- æ¤œç´¢æ©Ÿèƒ½
- ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆåå‰é †ã€è¿½åŠ é †ï¼‰
- ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
- CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- è¤‡æ•°ãƒªã‚¹ãƒˆç®¡ç†
- ã‚¯ãƒ©ã‚¦ãƒ‰åŒæœŸï¼ˆPhase 7ï¼‰

---

## ã¾ã¨ã‚

### Phase 5ã§é”æˆã—ãŸã“ã¨

- IndexedDBã¨React UIã®å®Œå…¨çµ±åˆ
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ç¢ºç«‹
- ç›´æ„Ÿçš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å®Ÿç¾
- ã‚¹ãƒ ãƒ¼ã‚ºãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

### é‡è¦ãƒã‚¤ãƒ³ãƒˆ

1. **ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯**: useShoppingListã§ãƒ‡ãƒ¼ã‚¿ãƒ­ã‚¸ãƒƒã‚¯ã¨UIåˆ†é›¢
2. **å³åº§ã®åæ˜ **: ã™ã¹ã¦ã®æ“ä½œãŒIndexedDBã«å³åº§ã«ä¿å­˜
3. **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å®Œçµ**: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šä¸è¦
4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: useMemo/useCallbackã§æœ€é©åŒ–

### Offlistã®æ ¸å¿ƒä¾¡å€¤

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ â†’ IndexedDB â†’ å³åº§ã«åæ˜ 
              â†‘
        ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸è¦
```

Phase 5ã®å®Œæˆã«ã‚ˆã‚Šã€Offlistã¯**æ©Ÿå†…ãƒ¢ãƒ¼ãƒ‰ã§ã‚‚å®Œç’§ã«å‹•ä½œã™ã‚‹è²·ã„ç‰©ãƒªã‚¹ãƒˆã‚¢ãƒ—ãƒª**ã¨ã—ã¦å®Œæˆã—ã¾ã—ãŸã€‚Phase 6ã§Vercelã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€ä¸–ç•Œä¸­ã®èª°ã‚‚ãŒã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚

---

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆè€…**: AI Agent (Claude)
**æœ€çµ‚æ›´æ–°æ—¥**: 2025å¹´10æœˆ23æ—¥
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
**é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- [å…¨ä½“æ¦‚è¦](./20251023_00-overview.md)
- [Phase 3: IndexedDB Setup](../ticket/initial/phase-03-indexeddb-setup.md)
- [Phase 4: UI Components](../ticket/initial/phase-04-ui-components.md)
- [Phase 6: Vercel Deployment](./20251023_06-vercel-deployment.md) (æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—)
